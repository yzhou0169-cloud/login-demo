<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>超级粒子心脏</title>
    <style>
        canvas { position: absolute; left: 0; top: 0; width: 100%; height: 100%; background-color: #000; }
    </style>
</head>
<body>
    <canvas id="heart"></canvas>
    <script>
        const canvas = document.getElementById('heart');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];

        function init() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.onresize = init;
        init();

        function getHeartPoint(t) {
            return {
                x: 16 * Math.pow(Math.sin(t), 3),
                y: -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t))
            };
        }

        class Particle {
            constructor() {
                const t = Math.random() * Math.PI * 2;
                const point = getHeartPoint(t);
                this.baseX = point.x;
                this.baseY = point.y;
                this.reset();
            }
            reset() {
                this.iteration = 0;
                this.maxIteration = 50 + Math.random() * 50;
                this.size = Math.random() * 2 + 0.5;
                // 颜色在深粉和亮红之间切换
                this.color = Math.random() > 0.5 ? '#ff2d55' : '#ffb6c1';
            }
            draw(pulse) {
                this.iteration++;
                const scale = (15 + pulse * 2); // 核心缩放
                const x = this.baseX * scale + width / 2 + (Math.random()-0.5)*5;
                const y = this.baseY * scale + height / 2 + (Math.random()-0.5)*5;
                
                const opacity = 1 - this.iteration / this.maxIteration;
                ctx.fillStyle = this.color;
                ctx.globalAlpha = opacity;
                
                ctx.beginPath();
                ctx.arc(x, y, this.size, 0, Math.PI * 2);
                ctx.fill();

                if (this.iteration >= this.maxIteration) this.reset();
            }
        }

        // 初始化 2000 个粒子，营造密集的震撼感
        for (let i = 0; i < 2000; i++) {
            particles.push(new Particle());
        }

        function render() {
            // 微微的拖尾，保持清晰度
            ctx.globalAlpha = 1;
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, width, height);

            // 模拟心脏真实跳动：快跳-微停-快收
            const time = Date.now() / 1000;
            const pulse = Math.pow(Math.sin(time * 2.5), 10) * 0.5 + Math.pow(Math.sin(time * 2.5 + 0.5), 2) * 0.2;

            particles.forEach(p => p.draw(pulse));
            requestAnimationFrame(render);
        }
        render();
    </script>
</body>
</html>

